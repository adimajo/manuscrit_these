\defbibheading{subbibliography}[\refname]{\subsection*{#1}}

\newcommand{\ag}{\ensuremath{\bm{\alpha}}}

\newcommand{\be}{\ensuremath{\bm{e}}}

\newcommand{\bE}{\ensuremath{\bm{E}}}

\newcommand{\E}{\ensuremath{{E}}}

\newcommand{\f}{\ensuremath{\text{f}}}

\newcommand{\nf}{\ensuremath{\text{nf}}}

\newcommand{\pd}{\ensuremath{p_{\text{data}}}}

\newcommand{\ps}{p_{\text{sample}}}

\DeclareMathOperator*{\argmin}{argmin}

\DeclareMathOperator*{\argmax}{argmax}

\newcommand{\bc}{\boldsymbol{c}} 
\newcommand{\bbe}{\mathbf{e}}
\newcommand\q{{\bm{q}}}
\newcommand\Q{\mathcal{Q}}
\newcommand{\bdelta}{\bm{\delta}}

\newcommand{\bqk}{\bm{\mathfrak{q}}}
\newcommand{\bbqk}{\mathfrak{\mathbf{q}}}
\newcommand{\qk}{\mathfrak{q}}

\newcommand{\tr}{t}

\newcommand{\appropto}{\mathrel{\vcenter{
  \offinterlineskip\halign{\hfil$##$\cr
    \propto\cr\noalign{\kern2pt}\sim\cr\noalign{\kern-2pt}}}}}


\newcommand{\yslant}{0.5}
\newcommand{\xslant}{-0.6}


\tikzset{style green/.style={
    set fill color=green!50!lime!60,
    set border color=white,
  },
  style cyan/.style={
    set fill color=cyan!90!blue!60,
    set border color=white,
  },
  style orange/.style={
    set fill color=orange!80!red!60,
    set border color=white,
  },
  hor/.style={
    above left offset={-0.15,0.31},
    below right offset={0.15,-0.125},
    #1
  },
  ver/.style={
    above left offset={-0.1,0.3},
    below right offset={0.15,-0.15},
    #1
  }
}

\newcommand{\tikzmark}[2][minimum width=6cm,minimum height=1.5cm]{
\tikz[remember picture, overlay]
\node[anchor=west,
inner sep=0pt,
outer sep=6pt,
xshift=-0.5em,
yshift=-3ex,
#1](#2){};
}


\tikzset{
    myarrow/.style={
        draw,
        fill=orange,
        single arrow,
        minimum height=3.5ex,
        single arrow head extend=1ex
    }
}


\tikzset{
  treenode/.style = {shape=rectangle, rounded corners,
                     draw, align=left,
                     top color=white, bottom color=blue!20},
  root/.style     = {treenode, font=\Large, bottom color=red!30},
  env/.style      = {treenode, font=\ttfamily\normalsize},
  dummy/.style    = {circle,draw}
}


\def\mybar#1#2#3{%%
\begin{tabular}{@{}l@{}} {\scriptsize #1} \vspace*{-0.2cm} \\ {\scriptsize #2} \vspace*{-0.2cm} \\ {\scriptsize #3}\end{tabular} & \resizebox{.05\textwidth}{0.5cm}{\begin{tabular}{@{}l@{}}{\color{green}\rule[-6pt]{#1bp}{10pt}} \\ {\color{orange}\rule[0pt]{#2bp}{10pt}} \vspace*{-0.1cm} \\ {\color{red}\rule[10pt]{#3bp}{10pt}} \end{tabular}}}

\def\myobar#1#2#3{%%
\begin{tabular}{@{}l@{}} {\scriptsize #1} \vspace*{-0.2cm} \\ {\scriptsize #2} \vspace*{-0.2cm} \\ {\scriptsize #3}\end{tabular} & \resizebox{.05\textwidth}{0.5cm}{\begin{tabular}{@{}l@{}}{\color{orange}\rule[-6pt]{#1bp}{10pt}} \\ {\color{green}\rule[0pt]{#2bp}{10pt}} \vspace*{-0.1cm} \\ {\color{orange}\rule[10pt]{#3bp}{10pt}}\end{tabular}}}


\definecolor{light-gray}{gray}{0.95}
\newcommand{\code}[1]{\colorbox{light-gray}{\texttt{#1}}}


\newcommand{\myGlobalTransformation}[2]
{
    \pgftransformcm{1}{0}{0.4}{0.5}{\pgfpoint{#1cm}{#2cm}}
}


\newcommand{\myGlobalTransformationbis}[2]
{
    \pgftransformcm{1}{0}{0.4}{0.3}{\pgfpoint{#1cm}{#2cm}}
}

\newcommand{\gridThreeD}[3]
{
    \begin{scope}
        \myGlobalTransformation{#1}{#2};
        \draw [#3,step=7cm] grid (7,7);
    \end{scope}
}

\tikzstyle myBG=[line width=3pt,opacity=1.0]

\newcommand{\drawLinewithBG}[2]
{
    \draw[white,myBG]  (#1) -- (#2);
    \draw[black,very thick] (#1) -- (#2);
}

\newcommand{\graphLinesHorizontal}
{
    \drawLinewithBG{1,1}{7,1};
    \drawLinewithBG{1,3}{7,3};
    \drawLinewithBG{1,5}{7,5};
    \drawLinewithBG{1,7}{7,7};
}

\newcommand{\graphLinesVertical}
{
    %swaps x and y coordinate (hence vertical lines):
    \pgftransformcm{0}{1}{1}{0}{\pgfpoint{0cm}{0cm}}
    \graphLinesHorizontal;
}

\newcommand{\graphThreeDnodes}[2]
{
    \begin{scope}
        \myGlobalTransformation{#1}{#2};
        \foreach \x in {1,3,5,7} {
            \foreach \y in {1,3,5,7} {
                \node at (\x,\y) [circle,fill=black,scale=0.3] {};
                %this way circle of nodes will not be transformed
            }
        }
    \end{scope}
}

\newcommand\rstyle{%
  \NoAutoSpacing
  \lstset{%
    language=R,
    alsoletter={_},
otherkeywords={install_github},             % Add keywords here
%    basicstyle=\small,
    keywordstyle=\color{blue},
    stringstyle=\color{green},
%    numbers=left,
%    numberstyle=\tiny,
%    numbersep=5pt,
  numbers=left,                   % where to put the line-numbers
  numberstyle=\tiny\color{blue},  % the style that is used for the line-numbers
  stepnumber=1,                   % the step between two line-numbers. If it is 1, each line
                                  % will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
    frame=single%
  }%
}

\lstnewenvironment{rlisting}
{\rstyle}{}

\newcommand\rinline[1]{{\rstyle\lstinline!#1!}}

\newcommand\pystyle{%
  \NoAutoSpacing
  \lstset{%
    language=R,
    alsoletter={_},
    alsoletter={.},
otherkeywords={install_github},             % Add keywords here
%    basicstyle=\small,
    keywordstyle=\color{blue},
    stringstyle=\color{green},
%    numbers=left,
%    numberstyle=\tiny,
%    numbersep=5pt,
  numbers=left,                   % where to put the line-numbers
  numberstyle=\tiny\color{blue},  % the style that is used for the line-numbers
  stepnumber=1,                   % the step between two line-numbers. If it is 1, each line
                                  % will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
    frame=single%
  }%
}

\lstnewenvironment{pylisting}
{\pystyle}{}

\newcommand\pyinline[1]{{\pystyle\lstinline!#1!}}






\newcommand\bashstyle{%
  \NoAutoSpacing
  \lstset{%
    language=bash,
    alsoletter={_},
otherkeywords={install_github},             % Add keywords here
%    basicstyle=\small,
%    keywordstyle=\color{blue},
%    stringstyle=\color{green},
%    numbers=left,
%    numberstyle=\tiny,
%    numbersep=5pt,
  numbers=left,                   % where to put the line-numbers
%  numberstyle=\tiny\color{blue},  % the style that is used for the line-numbers
  stepnumber=1,                   % the step between two line-numbers. If it is 1, each line
                                  % will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
    frame=single%
  }%
}

\lstnewenvironment{bashlisting}
{\bashstyle}{}

\newcommand\bashinline[1]{{\bashstyle\lstinline!#1!}}